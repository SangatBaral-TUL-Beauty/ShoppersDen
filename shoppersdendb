-- This script was generated by a beta version of the ERD tool in pgAdmin 4.
-- Please log an issue at https://redmine.postgresql.org/projects/pgadmin4/issues/new if you find any bugs, including reproduction steps.
BEGIN;


CREATE TABLE public.admin
(
    admin_id bigint NOT NULL,
    admin_name character varying(255),
    admin_password character varying(255),
    PRIMARY KEY (admin_id)
);

CREATE TABLE public.category
(
    category_id bigint NOT NULL,
    category_name character varying(255),
    PRIMARY KEY (category_id)
);

CREATE TABLE public.customer
(
    customer_id bigint NOT NULL,
    customer_name character varying(255),
    address character varying(255),
    email_id character varying(255),
    password character varying(255),
    phone bigint,
    security_question character varying(255),
    security_answer character varying(255),
    PRIMARY KEY (customer_id)
);

CREATE TABLE public.products
(
    product_id bigint NOT NULL,
    product_name character varying(255),
    description character varying(255),
    price numeric(7, 2),
    product_image character varying(255),
    dom date,
    category_id bigint,
    PRIMARY KEY (product_id)
);

CREATE TABLE public.shopping_cart
(
    product_id bigint NOT NULL,
    product_name character varying(255),
    price numeric(7, 2),
    quantity integer,
    temp_item_id bigint,
    customer_id bigint NOT NULL
);

CREATE TABLE public.transaction
(
    transaction_id bigint NOT NULL,
    transaction_date date,
    product_id bigint,
    customer_id bigint,
    PRIMARY KEY (transaction_id)
);

ALTER TABLE public.products
    ADD FOREIGN KEY (category_id)
    REFERENCES public.category (category_id)
    NOT VALID;


ALTER TABLE public.shopping_cart
    ADD FOREIGN KEY (product_id)
    REFERENCES public.products (product_id)
    NOT VALID;


ALTER TABLE public.shopping_cart
    ADD FOREIGN KEY (customer_id)
    REFERENCES public.customer (customer_id)
    NOT VALID;


ALTER TABLE public.transaction
    ADD FOREIGN KEY (product_id)
    REFERENCES public.products (product_id)
    NOT VALID;


ALTER TABLE public.transaction
    ADD FOREIGN KEY (customer_id)
    REFERENCES public.customer (customer_id)
    NOT VALID;

END;
